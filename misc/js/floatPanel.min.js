(function(b){var i=b;var k=i.document;var c={};function g(p,n){var m={width:300,height:"auto",header:{enabled:true,content:"Panel title",},footer:{enabled:true,content:"Panel footer",},body:{enabled:true,content:"Panel content",},closeBtn:true,backDrop:false,floatHeight:10,floatHeightInvolve:false,};c[p]=new f(p);var o=m;if(n){o=l(m,n)}c[p].set(o);c[p].reposition();return c[p]}function f(q){var m=k.body;if(!q){throw ("id required!")}else{if(typeof q!=="string"){throw ("invalid id!")}}Object.defineProperty(this,"id",{configurable:true,enumerable:true,value:q,writable:false,});this.floatHeight=0;this.floatHeightInvolve=false;this.direction="up";Object.defineProperty(this,"_backDropNode",{configurable:true,enumerable:false,value:null,writable:true,});var o=k.getElementById(q);if(o){o.parentNode.removeChild(o)}var p=k.createElement("div");p.setAttribute("class","floatPanel invisible");p.id=q;m.appendChild(p);Object.defineProperty(this,"node",{configurable:true,enumerable:true,value:k.getElementById(q),writable:false,});var n='<div class="panel panel-blue">'+'<div class="panel-header">'+'<h3 class="panel-title">'+"</h3>"+"</div>"+'<div class="panel-body">'+"</div>"+'<div class="panel-footer">'+"</div>"+"</div>";this.node.innerHTML=n;Object.defineProperties(this,{width:{configurable:true,enumerable:true,get:function(){return h(this.node,"width")},set:function(r){if(typeof r==="number"){this.node.style.width=r+"px"}else{this.node.style.width=r}},},height:{configurable:true,enumerable:true,get:function(){return h(this.node,"height")},set:function(r){if(typeof r==="number"){this.node.style.height=r+"px"}else{this.node.style.height=r}},},left:{configurable:true,enumerable:true,get:function(){return Number(h(this.node,"left").replace("px",""))},set:function(r){if(typeof r==="number"){this.node.style.left=r+"px"}else{this.node.style.left=r}},},top:{configurable:true,enumerable:true,get:function(){return Number(h(this.node,"top").replace("px",""))},set:function(r){if(typeof r==="number"){this.node.style.top=r+"px"}else{this.node.style.top=r}},},zIndex:{configurable:true,enumerable:true,get:function(){return Number(h(this.node,"z-index"))},set:function(r){this.node.style["z-index"]=r;if(this._backDropNode){this._backDropNode.style["z-index"]=Number(r)-1}},},})}f.prototype={constructor:f,show:function(p,q){var m=arguments;var o=k.querySelector("html");for(var n=0;n<m.length;n++){if(typeof m[n]=="object"){if(m[n].pageX&&m[n].pageY){this.reposition(m[n])}}if(typeof m[n]=="function"){m[n].call(this)}}if(this._backDropNode){this._backDropNode.style.display="block";k.querySelector("html").style.overflow="hidden;"}j(this.node,"active");this.node.style.display="block";a(this.node,"invisible");return this},hide:function(p){if(p&&p.pageX&&p.pageY){var r=this.width+10;if(this.floatHeightInvolve){var m=this.height+1+this.floatHeight}else{var m=this.height+1}var o=Number(p.pageX);var n=Number(p.pageY);var q=this.top;if(this.direction&&this.direction.toLowerCase()==="down"){q-=this.floatHeight}if(o>=this.left&&o<=this.left+r&&n>=q&&n<=q+m){return 0}else{if(this._backDropNode){this._backDropNode.style.display="none";k.querySelector("html").style.overflow=""}j(this.node,"invisible");a(this.node,"active");this.node.style.removeProperty("max-height");this.node.style.removeProperty("max-width");this.node.style.display="none"}}else{if(this._backDropNode){this._backDropNode.style.display="none";k.querySelector("html").style.overflow=""}j(this.node,"invisible");a(this.node,"active");this.node.style.removeProperty("max-height");this.node.style.removeProperty("max-width");this.node.style.display="none"}return this},set:function(n){if(n){if(n.width){this.width=n.width}if(n.height){this.height=n.height}if(n.header){if(n.header.enabled===true){this.node.querySelector("#"+this.id+" > .panel >.panel-header").style.display="block"}else{if(n.header.enabled===false){this.node.querySelector("#"+this.id+" > .panel >.panel-header").style.display="none"}}if(n.header.content){this.node.querySelector("#"+this.id+" > .panel >.panel-header").innerHTML=n.header.content}}if(n.footer){if(n.footer.enabled===true){this.node.querySelector("#"+this.id+" > .panel >.panel-footer").style.display="block"}else{if(n.footer.enabled===false){this.node.querySelector("#"+this.id+" > .panel >.panel-footer").style.display="none"}}if(n.footer.content){this.node.querySelector("#"+this.id+" > .panel >.panel-footer").innerHTML=n.footer.content}}if(n.body){if(n.body.enabled===true){this.node.querySelector("#"+this.id+" > .panel >.panel-body").style.display="block"}else{if(n.body.enabled===false){this.node.querySelector("#"+this.id+" > .panel >.panel-body").style.display="none"}}if(n.body.content){this.node.querySelector("#"+this.id+" > .panel >.panel-body").innerHTML=n.body.content}}if(n.closeBtn===true){var o="";o=this.node.querySelector("#"+this.id+" >button.close-button");if(o){o.parentNode.removeChild(o)}var m='<button aria-label="关闭" type="button" class="Button close-button Button-plain">'+'<svg class="closeIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24" >'+'<path d="M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z" '+'fill-rule="evenodd"></path>'+"</svg >"+"</button >";
this.node.insertAdjacentHTML("afterbegin",m);this.node.querySelector("#"+this.id+" >button.close-button").addEventListener("click",(function(r){return function(s){r.hide()}}(this)))}else{if(n.closeBtn===false){var o="";o=this.node.querySelector("#"+this.id+" >button.close-button");if(o){o.parentNode.removeChild(o)}}}if(n.backDrop===true){var q=k.querySelector("#"+this.id+"-backDrop");if(q){q.parentNode.removeChild(q)}var p='<div class="floatPanel-backdrop" id="'+this.id+'-backDrop" style="z-index:'+(this.zIndex-1)+'; display:none;"></div>';this.node.insertAdjacentHTML("beforebegin",p);this._backDropNode=k.getElementById(this.id+"-backDrop")}else{if(n.backDrop===false){if(this._backDropNode){this._backDropNode.parentNode.removeChild(this._backDropNode);this._backDropNode=null}}}if(n.direction){n.direction.toLowerCase()==="down"?this.direction="down":this.direction="up"}if(n.floatHeight){this.floatHeight=isNaN(Number(n.floatHeight))?this.floatHeight:Number(n.floatHeight)}if(n.floatHeightInvolve){this.floatHeightInvolve=!!n.floatHeightInvolve}}return this},reposition:function(m){var s=k.documentElement.clientWidth;var o=k.documentElement.clientHeight;var q=k.documentElement.scrollTop;var u=k.documentElement.scrollLeft;var t=this.width;var r=this.height+1;if(!m||!m.pageX||!m.pageY){var m={};m.pageX=(s/2)+u;if(this.direction&&this.direction.toLowerCase()==="down"){m.pageY=(o/2)+q-(r/2)-this.floatHeight}else{m.pageY=(o/2)+q+(r/2)+this.floatHeight}}var p=Number(m.pageX);p=p-t/2;var n=Number(m.pageY);if(this.direction&&this.direction.toLowerCase()==="down"){n=n+this.floatHeight}else{n=n-r-this.floatHeight}if(t>s){this.node.style.left=(5+u)+"px";this.node.style["max-width"]=(s-10)+"px";this.node.style["overflow-x"]="auto"}else{if((p+t)<(s+u)){if(p<u){this.node.style.left=(5+u)+"px"}else{this.node.style.left=p+"px"}}else{this.node.style.left=(p-(p+t-s-u))+"px"}}if(this.height>o){this.node.style.top=(5+q)+"px";this.node.style["max-height"]=(o-10)+"px";this.node.style["overflow-y"]="auto"}else{if(n<q){this.node.style.top=(5+q)+"px"}else{if(r+n-q<o){this.node.style.top=n+"px"}else{this.node.style.top=(n-(n-q+r-o))+"px"}}}return this},destroy:function(){if(this._backDropNode){this._backDropNode.parentNode.removeChild(this._backDropNode);delete this._backDropNode}this.node.parentNode.removeChild(this.node);for(var m in this){delete this[m]}return null},mouseleave:function(m){this.node.addEventListener("mouseleave",m);return this},mouseenter:function(m){this.node.addEventListener("mouseenter",m);return this},};function h(o,n){var m=null;switch(n){case"width":d(o,n,function(){m=o.offsetWidth});break;case"height":d(o,n,function(){m=o.offsetHeight});break;default:m=d(o,n);break}return m}function d(o,n,p){var m=null;o.style["visibility"]="hidden";o.style["position"]="absolute";o.style["display"]="block";if(p){p()}else{m=i.getComputedStyle(o)[n]}o.style["visibility"]="";o.style["position"]="";o.style["display"]="";if(m){return m}}function e(m,n){return !!m.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function j(m,n){if(!e(m,n)){m.className+=" "+n}}function a(m,n){if(e(m,n)){m.className=m.className.replace(new RegExp("(\\s|^)"+n+"(\\s|$)")," ")}}function l(o,n){if(n!=null){for(var m in n){if(n.hasOwnProperty(m)){if(Array.isArray(n[m])){o[m]=[]}else{if(n[m]===null){o[m]=null;continue}}o[m]=typeof n[m]==="object"?l(o[m],n[m]):n[m]}}return o}}if(typeof module!=="undefined"&&module.exports){module.exports=g}else{i.FloatPanel=g}})("undefined"!==typeof window?window:this);